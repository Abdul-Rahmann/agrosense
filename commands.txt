docker-compose exec airflow-webserver bash

docker-compose exec api-server bash

cat /opt/airflow/simple_auth_manager_passwords.json.generated

{"admin": "RF45QSkf2Uf6MydP"}

docker exec -it airflow-scheduler bash

ls /opt/airflow/agrosense

 airflow command error: argument GROUP_OR_COMMAND: Command `airflow webserver` has been removed. Please use `airflow api-server`, see help above.


 DOCKER COMMANDS
 1. docker volume ls # listing existing volumes
 2. docker volume inspect postgres_data # Inspecting volume data
 3. docker-compose logs
 4. docker volume prune
 5. docker volume rm <volume_name>  eg. docker volume rm agrosense_airflow_postgres_data
 6. docker-compose exec airflow-apiserver bash # latest command
 7. docker-compose up airflow-scheduler
 8. docker-compose logs airflow-scheduler
 9. docker-compose exec airflow-scheduler airflow dags list --reload
 10. lsof -i :5432
 11. docker rm $(docker ps -aq)
 12. docker system prune -a --volumes

 DBT Commands
 1. docker-compose up -d --build
 2. docker-compose exec <service-name> dbt run, docker-compose exec dbt dbt run
 3. run, test, debug, seed, list,
 4. docker compose run --rm dbt debug # Testing dbt setup before running models OR docker-compose run dbt debug
 5. docker compose run --rm dbt ls # list models
 6. docker-compose run dbt test
 7. docker-compose up dbt
 8. docker-compose stop dbt
 9. docker-compose run dbt bash

DOCKER-DBT COMMANDS
 10.dc run --rm dbt run
 11.dc run --rm dbt test


POSTRES
1.  docker exec -it postgres_db bash
2.  psql -U agrosense -d agrosense_db or  docker exec -it postgres_db psql -U agrosense -d agrosense_db
3. \i /docker-entrypoint-initdb.d/03_mlflow_db.sql
4. docker exec -it postgres_db psql -U agrosense -d agrosense_db -c "ALTER USER agrosense WITH PASSWORD 'new_secure_password';"

WHEN TO BUILD
ls -la dockerfiles/Dockerfile.mlflow
ls -la requirements/mlflow-requirements.txt
docker images | grep mlflow

KILLING POSTGRES
netstat -tuln | grep 5432, sudo kill -15 566


DELETING THE CONTENT OF ALL TABLES
-- Disable foreign key checks
SET session_replication_role = replica;

TRUNCATE TABLE
    datasets,
    experiment_tags,
    experiments,
    input_tags,
    inputs,
    latest_metrics,
    metrics,
    model_version_tags,
    model_versions,
    params,
    registered_model_aliases,
    registered_model_tags,
    registered_models,
    runs,
    tags,
    trace_info,
    trace_request_metadata,
    trace_tags
RESTART IDENTITY CASCADE;

-- Re-enable foreign key checks
SET session_replication_role = DEFAULT;